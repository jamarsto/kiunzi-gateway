# Build time configuration & dev services configuration
quarkus:
  container-image:
    group: jasonmarstoncouk
    name: gateway
    registry: registry.hub.docker.com
    username: jasonmarstoncouk
    password: ${DOCKER_HUB_TOKEN}
    push: true
  keycloak:
    devservices:
      realm-path: quarkus-realm.json
  kubernetes:
    name: gateway
  jib:
    base-jvm-image: eclipse-temurin:20-jdk-alpine
    base-registry-username: jasonmarstoncouk
    base-registry-password: ${DOCKER_HUB_TOKEN}

# development profile configuration
"%dev":
  quarkus:
    http:
      port: 8081
    oidc:
      client-id: backend-service
      credentials:
        secret: ${CLIENT_SECRET}
      roles:
        role-claim-path:
          - realm_access/roles
          - resource_access/backend-service/roles
  smallrye:
    jwt:
      sign:
        key:
          location: privateKey.pem
  gateway:
    api:
      port: 8080
      root: client-api
      ssl:
        enabled: false
    jwt:
      integration:
        subject: service
      issuer: https://example.com/issuer
      role: user
    type: client

# production profile configuration
"%prod":
  quarkus:
    http:
      port: 8080
    oidc:
      auth-server-url: http://localhost:8080/realms/quarkus
      client-id: backend-service
      credentials:
        secret: ${CLIENT_SECRET}
      roles:
        role-claim-path:
          - realm_access/roles
          - resource_access/backend-service/roles
  smallrye:
    jwt:
      sign:
        key:
          location: privateKey.pem
  gateway:
    api:
      port: 8080
      root: client-api
      ssl:
        enabled: false
    jwt:
      integration:
        subject: service
      issuer: https://example.com/issuer
      role: user
    type: client
